function displayVideo(a){$("#btnToggleVideo").removeAttr("disabled");$("#showVideo").hide();$("#showTranscript").show();$("#btnToggleComplete").prop("disabled","disabled");$("#menu-Home").removeClass("active");$("#menu-How").removeClass("active");$("#vidTranscript").hide();sectionStarted(a);displayInDiv(a,"Transcript");changeVideo(a);resetDisplay()}function resetDisplay(){$("#vidTranscript").hide();$("#vidContainer").show()}function switchVideo(){$("#vidContainer").toggle();$("#vidTranscript").toggle();$("#showVideo").toggle();$("#showTranscript").toggle()}function changeVideo(a){$.ajax({url:"runVideo.php",data:{secRowId:a},type:"GET",success:function(b){$("#vidContainer").html(b)}})}function chapterClicked(a){resetDisplay();$("#vidContainer").load("welcome.html")}function sectionStarted(e){var b=new Date($.now());var d=sessionStorage.getItem("userProgress");var f=JSON.parse(d);var a=f.LastAccessed["SecRowId"];var c=f[e];if(c.Status=="0"){console.log("clickedRow status = 0");f[e]["Status"]="Started";f[e]["StartDate"]=b}f.LastAccessed["SecRowId"]=e;f.LastAccessed["LastActiveChapter"]=c.ChapterId;f.LastAccessed["SecCode"]=c.ChapterId;sessionStorage.setItem("userProgress",JSON.stringify(f));updateProgressBar();if(c.Status!=="Viewed"){$("#btnToggleComplete").removeAttr("disabled")}updateUserProgress();if(a>0&&f[a]["Status"]!="Viewed"){$("#StatusGlyph-"+a).prop("title","");$("#StatusGlyph-"+a).html("");$("#"+a).removeClass("lastActive");$("#"+a).addClass("text-black")}if(f[e]["Status"]!="Viewed"){$("#StatusGlyph-"+e).prop("title","Last Accessed - click to continue");$("#StatusGlyph-"+e).html('<span class="glyphicon glyphicon-road text-brown text-very-right"></span>');$("#"+e).removeClass("text-black");$("#"+e).addClass("lastActive")}}function sectionCompleted(){var a=new Date($.now());var d=JSON.parse(sessionStorage.getItem("userProgress"));var b=d.LastAccessed["SecRowId"];if(d[b]["CompleteDate"]==null){if(confirm("This section will be marked as Viewed. Are you sure?")){d[b]["Status"]="Viewed";d[b]["CompleteDate"]=a;$("#"+b).removeClass("lastActive");$("#"+b).addClass("viewed");$("#StatusGlyph-"+b).prop("title","Assessment Not Completed");$("#StatusGlyph-"+b).html('<span class="glyphicon glyphicon-question-sign text-red text-very-right"></span>');sessionStorage.setItem("userProgress",JSON.stringify(d));updateProgressBar();updateUserProgress()}}var c=sessionStorage.getItem("userProgress")}function updateUserProgress(){var a=JSON.parse(sessionStorage.getItem("userProgress"));$.ajax({url:"updateUserCourseObj.php",data:{learnerId:sessionStorage.getItem("learnerId"),courseId:sessionStorage.getItem("courseId"),loggedIn:sessionStorage.getItem("loggedIn"),UserName:sessionStorage.getItem("UserName"),userJSON:JSON.stringify(a)},success:function(b){$("#divTest").html(b)}})}function updateProgressBar(){var e=JSON.parse(sessionStorage.getItem("userProgress"));console.log(e.Progress["Total"]);var d=e.Progress["Total"];var b=0;for(var a=1;a<=d;a++){if(e[a]["Status"]==="Viewed"){b++}}e.Progress["ViewedTotal"]=b;var c=parseInt(b/d*100);$("#viewedProgress").css("width",c+"%");$("#viewedProgress").prop("aria-valuenow",c);$("#viewedProgress").text(c+"% Complete");sessionStorage.setItem("userProgress",JSON.stringify(e))}function displayInDiv(b,a){if(b!=""){$.ajax({url:"show"+a+".php",data:{id:b},type:"GET",success:function(c){$("#vid"+a).html(c)}})}else{$("#vidTranscript").empty()}}function logout(){if(confirm("Are you sure you want to Log out?")){window.location.href="logout.php"}}function setActive(a,b){if(b==""){$("#menu-Dash").removeClass("active");$("#menu-Home").removeClass("active");$("#menu-Profile").removeClass("active")}else{$("#"+a).siblings().removeClass("active")}$("#"+a).addClass("active")}function showWelcome(){$("#vidContainer").load("welcome.html");$("#vidTranscript").empty();$("#btnToggleVideo").prop("disabled","disabled");$("#btnToggleComplete").prop("disabled","disabled");resetDisplay()}function showProfile(b){var a="#profileBody";var c=b+".php";setActive(b,"profile");if(b==0){$("#menu-Home").addClass("disabled");$("#menu-Home").addClass("no-entry");$("#main").load("learner.php")}else{setActive(b,"profile");$(a).load(c)}};